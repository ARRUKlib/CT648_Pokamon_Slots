{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./GameSet.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiURL=process.env.REACT_APP_API_URL||\"http://3.24.50.90:3000/api\";const GameSet=()=>{const[users,setUsers]=useState([]);const[selectedUser,setSelectedUser]=useState(null);const[amount,setAmount]=useState(0);const[winRate,setWinRate]=useState(5);const[error,setError]=useState(null);const[successMessage,setSuccessMessage]=useState(null);// ดึงข้อมูลผู้ใช้ทั้งหมด\nconst fetchUsers=async()=>{try{const response=await axios.get(`${apiURL}/users`,{headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});setUsers(response.data);}catch(error){console.error(\"Error fetching users:\",error);setError(\"Failed to load user data.\");}};useEffect(()=>{fetchUsers();},[]);// ฟังก์ชันสำหรับการเติมเงิน\nconst handleAddBalance=async()=>{if(!selectedUser){setError(\"Please select a user first.\");return;}try{await axios.post(`${apiURL}/update-balance`,{user_id:selectedUser.id,balance:amount// ส่งยอดเงินที่ต้องการอัปเดต\n},{headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});setSuccessMessage(`Balance updated successfully for ${selectedUser.username}`);fetchUsers();// อัปเดตรายการผู้ใช้ใหม่\nsetAmount(0);// รีเซ็ตช่องกรอกยอดเงิน\n}catch(error){console.error(\"Error updating balance:\",error);setError(\"Failed to update balance.\");}};// ฟังก์ชันสำหรับปรับอัตราชนะ\nconst handleUpdateWinRate=async()=>{if(!selectedUser){setError(\"Please select a user first.\");return;}if(winRate<0||winRate>100){setError(\"Win rate must be between 0 and 100.\");return;}try{await axios.post(`${apiURL}/update-win-rate`,{user_id:selectedUser.id,new_win_rate:winRate// ส่ง win rate ใหม่\n},{headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});setSuccessMessage(`Win rate updated successfully for ${selectedUser.username}`);fetchUsers();// อัปเดตรายการผู้ใช้ใหม่\nsetWinRate(5);// รีเซ็ตช่องเลือก Win Rate\n}catch(error){console.error(\"Error updating win rate:\",error);setError(\"Failed to update win rate.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"game-set-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Game Settings\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"g-error-message\",children:error}),successMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"g-success-message\",children:successMessage}),/*#__PURE__*/_jsxs(\"div\",{className:\"g-user-selection\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select User:\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>{const user=users.find(u=>u.id===Number(e.target.value));setSelectedUser(user||null);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select User --\"}),users.map(user=>/*#__PURE__*/_jsxs(\"option\",{value:user.id,children:[user.id,\" - \",user.username]},user.id))]})]}),selectedUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"g-user-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"User ID: \",/*#__PURE__*/_jsx(\"strong\",{children:selectedUser.id})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",/*#__PURE__*/_jsx(\"strong\",{children:selectedUser.username})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Current Balance:\"}),\" \",Math.floor(selectedUser.balance).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Current Win Rate:\"}),\" \",Math.floor(selectedUser.win_rate),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"g-balance-update\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Balance:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Enter amount\",value:amount,onChange:e=>setAmount(Number(e.target.value))}),/*#__PURE__*/_jsx(\"button\",{className:\"g-button\",onClick:handleAddBalance,children:\"Update Balance\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"g-win-rate-update\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update Win Rate:\"}),/*#__PURE__*/_jsx(\"select\",{value:winRate,onChange:e=>setWinRate(Number(e.target.value)),children:Array.from({length:20},(_,i)=>(i+1)*5).map(rate=>/*#__PURE__*/_jsxs(\"option\",{value:rate,children:[rate,\"%\"]},rate))}),/*#__PURE__*/_jsx(\"button\",{className:\"g-button\",onClick:handleUpdateWinRate,children:\"Update Win Rate\"})]})]});};export default GameSet;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","apiURL","process","env","REACT_APP_API_URL","GameSet","users","setUsers","selectedUser","setSelectedUser","amount","setAmount","winRate","setWinRate","error","setError","successMessage","setSuccessMessage","fetchUsers","response","get","headers","Authorization","localStorage","getItem","data","console","handleAddBalance","post","user_id","id","balance","username","handleUpdateWinRate","new_win_rate","className","children","onChange","e","user","find","u","Number","target","value","map","Math","floor","toLocaleString","win_rate","type","placeholder","onClick","Array","from","length","_","i","rate"],"sources":["/app/src/components/GameSet.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./GameSet.css\";\n\nconst apiURL = process.env.REACT_APP_API_URL || \"http://3.24.50.90:3000/api\";\n\ninterface User {\n  id: number;\n  username: string;\n  balance: number;\n  win_rate: number;\n}\n\nconst GameSet: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [amount, setAmount] = useState<number>(0);\n  const [winRate, setWinRate] = useState<number>(5);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n\n  // ดึงข้อมูลผู้ใช้ทั้งหมด\n  const fetchUsers = async () => {\n    try {\n      const response = await axios.get(`${apiURL}/users`, {\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\n      });\n      setUsers(response.data);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      setError(\"Failed to load user data.\");\n    }\n  };\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  // ฟังก์ชันสำหรับการเติมเงิน\n  const handleAddBalance = async () => {\n    if (!selectedUser) {\n      setError(\"Please select a user first.\");\n      return;\n    }\n    try {\n      await axios.post(\n        `${apiURL}/update-balance`,\n        {\n          user_id: selectedUser.id,\n          balance: amount, // ส่งยอดเงินที่ต้องการอัปเดต\n        },\n        {\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\n        }\n      );\n      setSuccessMessage(`Balance updated successfully for ${selectedUser.username}`);\n      fetchUsers(); // อัปเดตรายการผู้ใช้ใหม่\n      setAmount(0); // รีเซ็ตช่องกรอกยอดเงิน\n    } catch (error) {\n      console.error(\"Error updating balance:\", error);\n      setError(\"Failed to update balance.\");\n    }\n  };\n\n  // ฟังก์ชันสำหรับปรับอัตราชนะ\n  const handleUpdateWinRate = async () => {\n    if (!selectedUser) {\n      setError(\"Please select a user first.\");\n      return;\n    }\n    if (winRate < 0 || winRate > 100) {\n      setError(\"Win rate must be between 0 and 100.\");\n      return;\n    }\n    try {\n      await axios.post(\n        `${apiURL}/update-win-rate`,\n        {\n          user_id: selectedUser.id,\n          new_win_rate: winRate, // ส่ง win rate ใหม่\n        },\n        {\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\n        }\n      );\n      setSuccessMessage(`Win rate updated successfully for ${selectedUser.username}`);\n      fetchUsers(); // อัปเดตรายการผู้ใช้ใหม่\n      setWinRate(5); // รีเซ็ตช่องเลือก Win Rate\n    } catch (error) {\n      console.error(\"Error updating win rate:\", error);\n      setError(\"Failed to update win rate.\");\n    }\n  };\n\n  return (\n    <div className=\"game-set-container\">\n      <h1>Game Settings</h1>\n      {error && <p className=\"g-error-message\">{error}</p>}\n      {successMessage && <p className=\"g-success-message\">{successMessage}</p>}\n\n      <div className=\"g-user-selection\">\n        <label>Select User:</label>\n        <select\n          onChange={(e) => {\n            const user = users.find((u) => u.id === Number(e.target.value));\n            setSelectedUser(user || null);\n          }}\n        >\n          <option value=\"\">-- Select User --</option>\n          {users.map((user) => (\n            <option key={user.id} value={user.id}>\n              {user.id} - {user.username}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {selectedUser && (\n        <div className=\"g-user-details\">\n          <p>User ID: <strong>{selectedUser.id}</strong></p>\n          <p>Username: <strong>{selectedUser.username}</strong></p>\n          <p><strong>Current Balance:</strong> {Math.floor(selectedUser.balance).toLocaleString()}</p>\n          <p><strong>Current Win Rate:</strong> {Math.floor(selectedUser.win_rate)}%</p>\n        </div>\n      )}\n\n      <div className=\"g-balance-update\">\n        <h2>Add Balance:</h2>\n        <input\n          type=\"number\"\n          placeholder=\"Enter amount\"\n          value={amount}\n          onChange={(e) => setAmount(Number(e.target.value))}\n        />\n        <button className=\"g-button\" onClick={handleAddBalance}>Update Balance</button>\n      </div>\n\n      <div className=\"g-win-rate-update\">\n        <h2>Update Win Rate:</h2>\n        <select\n          value={winRate}\n          onChange={(e) => setWinRate(Number(e.target.value))}\n        >\n          {Array.from({ length: 20 }, (_, i) => (i + 1) * 5).map(rate => (\n            <option key={rate} value={rate}>{rate}%</option>\n          ))}\n        </select>\n        <button className=\"g-button\" onClick={handleUpdateWinRate}>Update Win Rate</button>\n      </div>\n    </div>\n  );\n};\n\nexport default GameSet;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}