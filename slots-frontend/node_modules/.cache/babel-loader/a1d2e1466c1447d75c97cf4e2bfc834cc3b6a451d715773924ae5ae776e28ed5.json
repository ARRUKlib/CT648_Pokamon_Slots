{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import jwt_decode from'jwt-decode';import'./Auth.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onLogin}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState(null);const handleSubmit=async event=>{event.preventDefault();try{const response=await axios.post('http://3.24.50.90:3000/api/login',{username,password});const token=response.data.token;onLogin(token);localStorage.setItem('token',token);const decodedToken=jwt_decode(token);console.log('Decoded Token:',decodedToken);await axios.post('http://3.24.50.90:3000/api/record-login',{},{headers:{Authorization:`Bearer ${token}`}});window.location.href='/home';}catch(error){console.error('Login Error:',error);setError('Login failed. Please check your username and password.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"auth-title\",children:\"Login Game\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username...\",value:username,onChange:e=>setUsername(e.target.value),className:\"login-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter password...\",value:password,onChange:e=>setPassword(e.target.value),className:\"login-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-link\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Sign up\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","axios","jwt_decode","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","username","setUsername","password","setPassword","error","setError","handleSubmit","event","preventDefault","response","post","token","data","localStorage","setItem","decodedToken","console","log","headers","Authorization","window","location","href","className","children","style","color","onSubmit","type","placeholder","value","onChange","e","target"],"sources":["/app/src/components/Login.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport './Auth.css';\n\ninterface LoginProps {\n  onLogin: (token: string) => void;\n}\n\nconst Login: React.FC<LoginProps> = ({ onLogin }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    try {\n      const response = await axios.post('http://3.24.50.90:3000/api/login', { username, password });\n      const token = response.data.token;\n\n      onLogin(token);\n      localStorage.setItem('token', token);\n\n      const decodedToken: any = jwt_decode(token);\n      console.log('Decoded Token:', decodedToken);\n\n      await axios.post(\n        'http://3.24.50.90:3000/api/record-login',\n        {},\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      window.location.href = '/home';\n    } catch (error) {\n      console.error('Login Error:', error);\n      setError('Login failed. Please check your username and password.');\n    }\n  };\n\n  return (\n    <div className=\"auth-background\">\n      <div className=\"auth-container\">\n        <h1 className=\"auth-title\">Login Game</h1>\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"text\"\n            placeholder=\"Enter username...\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            className=\"login-input\"\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Enter password...\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"login-input\"\n          />\n          <button type=\"submit\" className=\"login-button\">Login</button>\n        </form>\n        {/* เพิ่มปุ่ม Register Link */}\n        <div className=\"register-link\">\n          Don't have an account? <a href=\"/register\">Sign up</a>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,YAAY,CACnC,MAAO,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAMpB,KAAM,CAAAC,KAA2B,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CAC9C,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAgB,IAAI,CAAC,CAEvD,KAAM,CAAAgB,YAAY,CAAG,KAAO,CAAAC,KAAsB,EAAK,CACrDA,KAAK,CAACC,cAAc,CAAC,CAAC,CAEtB,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,KAAK,CAACmB,IAAI,CAAC,kCAAkC,CAAE,CAAEV,QAAQ,CAAEE,QAAS,CAAC,CAAC,CAC7F,KAAM,CAAAS,KAAK,CAAGF,QAAQ,CAACG,IAAI,CAACD,KAAK,CAEjCZ,OAAO,CAACY,KAAK,CAAC,CACdE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,KAAK,CAAC,CAEpC,KAAM,CAAAI,YAAiB,CAAGvB,UAAU,CAACmB,KAAK,CAAC,CAC3CK,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEF,YAAY,CAAC,CAE3C,KAAM,CAAAxB,KAAK,CAACmB,IAAI,CACd,yCAAyC,CACzC,CAAC,CAAC,CACF,CACEQ,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUR,KAAK,EAAG,CAC9C,CACF,CAAC,CAEDS,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,OAAO,CAChC,CAAE,MAAOlB,KAAK,CAAE,CACdY,OAAO,CAACZ,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACpCC,QAAQ,CAAC,wDAAwD,CAAC,CACpE,CACF,CAAC,CAED,mBACEX,IAAA,QAAK6B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9B5B,KAAA,QAAK2B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B9B,IAAA,OAAI6B,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,YAAU,CAAI,CAAC,CACzCpB,KAAK,eAAIV,IAAA,MAAG+B,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAAF,QAAA,CAAEpB,KAAK,CAAI,CAAC,cACjDR,KAAA,SAAM+B,QAAQ,CAAErB,YAAa,CAAAkB,QAAA,eAC3B9B,IAAA,UACEkC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,mBAAmB,CAC/BC,KAAK,CAAE9B,QAAS,CAChB+B,QAAQ,CAAGC,CAAC,EAAK/B,WAAW,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC7CP,SAAS,CAAC,aAAa,CACxB,CAAC,cACF7B,IAAA,UACEkC,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,mBAAmB,CAC/BC,KAAK,CAAE5B,QAAS,CAChB6B,QAAQ,CAAGC,CAAC,EAAK7B,WAAW,CAAC6B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC7CP,SAAS,CAAC,aAAa,CACxB,CAAC,cACF7B,IAAA,WAAQkC,IAAI,CAAC,QAAQ,CAACL,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,OAAK,CAAQ,CAAC,EACzD,CAAC,cAEP5B,KAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,yBACN,cAAA9B,IAAA,MAAG4B,IAAI,CAAC,WAAW,CAAAE,QAAA,CAAC,SAAO,CAAG,CAAC,EACnD,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}